<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>FluxPlayer Core</title>
    <!-- Simple CSS reset + Dark Theme -->
    <style>
        body { 
            background: #020617; /* slate-950 */
            color: #f8fafc; /* slate-50 */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0; 
            overflow: hidden;
            display: flex;
            height: 100vh;
        }
        
        /* Sidebar */
        #sidebar {
            width: 280px;
            background: #0f172a; /* slate-900 */
            border-right: 1px solid #1e293b;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        .header {
            padding: 20px;
            border-bottom: 1px solid #1e293b;
        }
        h1 { margin: 0; font-size: 18px; color: #fff; }
        .subtitle { font-size: 12px; color: #94a3b8; margin-top: 5px; }
        
        /* Track List */
        .track-item {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 1px solid #1e293b;
            transition: background 0.2s;
            display: flex;
            align-items: center;
        }
        .track-item:hover { background: #1e293b; }
        .track-item.active { background: rgba(99, 102, 241, 0.1); border-left: 3px solid #6366f1; }
        .track-info { margin-left: 10px; }
        .track-title { font-size: 14px; font-weight: 500; color: #e2e8f0; }
        .track-artist { font-size: 12px; color: #64748b; }
        
        /* Main Player Area */
        #main {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #000;
            position: relative;
        }
        video {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        /* Overlay Controls (Simple) */
        .controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            padding: 20px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        #main:hover .controls { opacity: 1; }
        
        /* Badge */
        .badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(99, 102, 241, 0.9);
            color: white;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 12px;
            pointer-events: none;
            z-index: 10;
        }
    </style>
    <!-- Load injected data -->
    <script src="data.js"></script> 
</head>
<body>
    <div id="sidebar">
        <div class="header">
            <h1 id="app-title">FluxPlayer</h1>
            <div class="subtitle" id="app-desc">Native Runtime</div>
        </div>
        <div id="track-list">
            <!-- Tracks injected here -->
        </div>
    </div>

    <div id="main">
        <div class="badge">Lite Runtime</div>
        <video id="player" controls autoplay></video>
    </div>

    <script>
        // Use the injected window.APP_DATA or fallback
        const data = window.APP_DATA || { 
            title: "Demo Mode", 
            tracks: [
                { id: 'demo', title: 'Big Buck Bunny', artist: 'Blender', source: 'https://storage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4' }
            ] 
        };

        const player = document.getElementById('player');
        const trackList = document.getElementById('track-list');
        const titleEl = document.getElementById('app-title');
        
        // Init UI
        if(data.title) titleEl.innerText = data.title;
        if(data.tracks) {
            data.tracks.forEach((track, index) => {
                const item = document.createElement('div');
                item.className = 'track-item';
                item.innerHTML = `
                    <div style="width:32px; height:32px; background:#334155; border-radius:4px; overflow:hidden;">
                        <img src="${track.poster || ''}" style="width:100%; height:100%; object-fit:cover;" onerror="this.style.display='none'">
                    </div>
                    <div class="track-info">
                        <div class="track-title">${track.title}</div>
                        <div class="track-artist">${track.artist}</div>
                    </div>
                `;
                item.onclick = () => playTrack(track, item);
                trackList.appendChild(item);
                
                // Auto play first
                if(index === 0) playTrack(track, item);
            });
        }

        function playTrack(track, element) {
            // Update active state
            document.querySelectorAll('.track-item').forEach(el => el.classList.remove('active'));
            if(element) element.classList.add('active');
            
            player.src = track.source;
            player.play();
        }
    </script>
</body>
</html>